import React, { useEffect, useRef } from "react";
import { useNavigate } from "react-router-dom";
import "./Recipes.css";

const recipeList = [
    {
        title: "ğŸƒ ×“×œ×•×¨×™×ª ×××•×œ××ª ×‘×‘×©×¨ ×•×˜×—×™× ×”",
        description: "ğŸ¥˜ **×“×œ×•×¨×™×ª ×××•×œ××ª ×‘×‘×©×¨ ×•×˜×—×™× ×”**\n\n" +
            "**ğŸ”¹ ××¦×¨×›×™×:**\n" +
            "ğŸƒ ×“×œ×•×¨×™×ª ××—×ª (×‘×™× ×•× ×™×ª)\n" +
            "-----------------------------\n" +
            "ğŸ¥© 200 ×’×¨× ×‘×©×¨ ×˜×—×•×Ÿ\n" +
            "-----------------------------\n" +
            "ğŸ¥„ 1/2 ×›×£ ×˜×—×™× ×” ×’×•×œ××™×ª\n" +
            "-----------------------------\n" +
            "ğŸ‹ ×—×¦×™ ×œ×™××•×Ÿ ×¡×—×•×˜\n" +
            "-----------------------------\n" +
            "ğŸ§‚ ××œ×— ×œ×¤×™ ×”×˜×¢×\n" +
            "-----------------------------\n" +
            "ğŸ¥« ×¨×•×˜×‘ ×¢×’×‘× ×™×•×ª (××•×¤×¦×™×•× ×œ×™)\n\n" +
            "**ğŸ”¹ ××•×¤×Ÿ ×”×”×›× ×”:**\n" +
            "ğŸ”ª **×©×œ×‘ 1:** ×—×•×¦×™× ××ª ×”×“×œ×•×¨×™×ª ×•×× ×§×™× ××’×¨×¢×™× ×™×.\n\n" +
            "ğŸ”¥ **×©×œ×‘ 2:** ××›× ×™×¡×™× ×œ×ª× ×•×¨ ×¢×œ **230Â°C** ×œ××©×š **40 ×“×§×•×ª**, ×¢×“ ×œ×¨×™×›×•×š ××œ×.\n\n" +
            "ğŸ³ **×©×œ×‘ 3:** ×‘××—×‘×ª ×—××”, ××˜×’× ×™× ××ª ×”×‘×©×¨ ×”×˜×—×•×Ÿ ×¢×“ ×©×”×•× ××©×—×™× (××¤×©×¨ ×œ×”×•×¡×™×£ ×¨×•×˜×‘ ×¢×’×‘× ×™×•×ª ğŸ¥«).\n\n" +
            "ğŸ¥£ **×©×œ×‘ 4:** ××¢×¨×‘×‘×™× ×˜×—×™× ×” ×¢× ××™×¥ ×œ×™××•×Ÿ ×•××œ×— ×œ×§×‘×œ×ª ×¨×•×˜×‘ ×—×œ×§.\n\n" +
            "ğŸ¥„ **×©×œ×‘ 5:** ×××œ××™× ××ª ×”×“×œ×•×¨×™×ª ×”×¨×›×” ×‘×‘×©×¨ ×•××–×œ×¤×™× ××¢×œ ××ª ×”×˜×—×™× ×”.\n\n" +
            "ğŸ˜‹ **×‘×ª×™××‘×•×Ÿ!**",
        videoUrl: "https://www.instagram.com/p/DFvPB1PIbcR/"
    },
    {
        title: "ğŸ¥’ ×§×™×©×•× ×•×¤×¨×’×™×ª",
        description: "ğŸ¥˜ **×§×™×©×•× ×•×¤×¨×’×™×ª ×‘×¨×•×˜×‘ ×˜×—×™× ×”**\n\n" +
            "**ğŸ”¹ ××¦×¨×›×™×:**\n" +
            "ğŸ¥’ 2 ×§×™×©×•××™× ×’×“×•×œ×™×\n" +
            "-----------------------------\n" +
            "ğŸ¥š 4 ×‘×™×¦×™×\n" +
            "-----------------------------\n" +
            "ğŸ§€ ××¢×˜ ×¤×¨××–â€™×Ÿ ××’×•×¨×“\n" +
            "-----------------------------\n" +
            "ğŸ— ×¤×¨×’×™×ª ×¦×œ×•×™×”\n" +
            "-----------------------------\n" +
            "ğŸ¥— ×¢×œ×™ ×—×¡×”\n" +
            "-----------------------------\n" +
            "ğŸ¥„ 1 ×›×£ ×˜×—×™× ×” ×“×œ×™×œ×”\n\n" +
            "**ğŸ”¹ ××•×¤×Ÿ ×”×”×›× ×”:**\n" +
            "ğŸ”ª **×©×œ×‘ 1:** ×’×¨×“×• ××ª ×”×§×™×©×•××™× ×‘×¤×•××¤×™×™×” ğŸ¥’\n\n" +
            "ğŸ”¥ **×©×œ×‘ 2:** ×ª×¡×—×˜×• ×”×™×˜×‘ ××ª ×”× ×•×–×œ×™× ğŸ’§\n\n" +
            "ğŸ³ **×©×œ×‘ 3:** ×‘×§×¢×¨×”, ×¢×¨×‘×‘×• ××ª ×”×§×™×©×•××™× ×¢× ×”×‘×™×¦×™× ğŸ¥š\n\n" +
            "ğŸ§€ **×©×œ×‘ 4:** ×”×•×¡×™×¤×• ××ª ×”×¤×¨××–â€™×Ÿ ×”××’×•×¨×“ ğŸ§€.\n\n" +
            "ğŸ¥„ **×©×œ×‘ 5:** ×”×¢×‘×™×¨×• ××ª ×”×ª×¢×¨×•×‘×ª ×œ×ª×‘× ×™×ª ×¢× × ×™×™×¨ ××¤×™×™×” ğŸ“„, ×•×¤×–×¨×• ×‘×¢×“×™× ×•×ª.\n\n" +
            "ğŸ”¥ **×©×œ×‘ 6:** ××¤×• ×‘×ª× ×•×¨ ×©×—×•×× ××¨××© ×œ-200 ××¢×œ×•×ª ğŸ”¥ ×œ××©×š 20 ×“×§×•×ª.\n\n" +
            "ğŸ”ª **×©×œ×‘ 7:** ×”×•×¦×™××• ××”×ª× ×•×¨, ×—×ª×›×• ××ª ×”×œ××¤×” ×œ×©× ×™×™× ğŸ¥ª ×•×ª×—×ª×›×• ××ª ×”×œ××¤×” ×œ×©× ×™×™×.\n\n" +
            "ğŸ— **×©×œ×‘ 8:** ××œ××• ×›×œ ×œ××¤×” ×‘×¤×¨×’×™×ª ğŸ—, ×›×£ ×˜×—×™× ×” ğŸ¥„, ×•×—×¡×” ğŸ¥—.\n\n" +
            "ğŸ˜‹ **×‘×ª×™××‘×•×Ÿ!**\n",
        videoUrl: "https://www.instagram.com/p/DEVFolNIubx/"
    },
    {
        title: "ğŸ¥® ×—×˜×™×£ ×—×œ×‘×•×Ÿ ×‘×™×ª×™, ×‘×¨×™× ×•×§×œ ×œ×”×›× ×” ğŸ‹ï¸â€â™‚ï¸",
        description: "ğŸ¥˜ **×—×˜×™×£ ×—×œ×‘×•×Ÿ ×‘×¨×™× ×•×˜×¢×™×**\n\n" +
            "**ğŸ”¹ ××¦×¨×›×™×:**\n" +
            "ğŸƒ ×“×œ×•×¨×™×ª ×©×œ××”\n" +
            "-----------------------------\n" +
            "ğŸŒ 3 ×‘× × ×•×ª\n" +
            "-----------------------------\n" +
            "ğŸ’ª 3 ×¡×§×•×¤×™× ××‘×§×ª ×—×œ×‘×•×Ÿ (×‘×˜×¢× ×©×•×§×•×œ×“, ×× ×™ ×”×©×ª××©×ª×™ ×‘××‘×§×” ××—×œ×‘ ×’×¨××¡ ×¤×“ ×•×××ª×™×§ ×¡×˜×™×‘×™×” )\n" +
            "-----------------------------\n" +
            "ğŸ§‚ × ×’×™×¢×” ×©×œ ××œ×—\n" +
            "-----------------------------\n" +
            "ğŸ« ×—×˜×™×£ ×‘×¨ ×˜×‘×¢×™ ×‘×˜×¢× ×ª××¨ ××’â€™×”×•×œ, ××’×•×–×™ ×œ×•×–, ×§×©×™×• ×•×©×‘×¨×™ ×§×§××•\n\n" +
            "**ğŸ”¹ ××•×¤×Ÿ ×”×”×›× ×”:**\n" +
            "1ï¸âƒ£ **×©×œ×‘ 1:** ×—×•×ª×›×™× ğŸƒ ×“×œ×•×¨×™×ª ×©×œ××” ×œ-4 ×—×œ×§×™×, ××•×¦×™××™× ××ª ×”×ª×›×•×œ×”, ×•××›× ×™×¡×™× ×œ×ª× ×•×¨ ×©×—×•×× ××¨××© ×œ-200 ××¢×œ×•×ª ğŸ”¥ ×œ××©×š 40 ×“×§×•×ª ×œ×¤×—×•×ª.\n\n" +
            "2ï¸âƒ£ **×©×œ×‘ 2:** ××•×¦×™××™× ××ª ×”×ª×•×›×Ÿ ×”×¨×š ××”×“×œ×¢×ª ×•××•×¢×›×™× ××•×ª×• ×™×—×“ ×¢× ğŸŒ 3 ×‘× × ×•×ª ×¢×“ ×©×”×ª×¢×¨×•×‘×ª ×—×œ×§×”.\n\n" +
            "3ï¸âƒ£ **×©×œ×‘ 3:** ××•×¡×™×¤×™× 3 ×¡×§×•×¤×™× ×©×œ ××‘×§×ª ×—×œ×‘×•×Ÿ ğŸ’ª, ×•××¢×¨×‘×‘×™× ×”×™×˜×‘.\n\n" +
            "4ï¸âƒ£ **×©×œ×‘ 4:** ××ª×‘×œ×™× ×‘× ×’×™×¢×” ğŸ§‚ ×©×œ ××œ×— ×•××¢×‘×™×¨×™× ××ª ×”×ª×¢×¨×•×‘×ª ×œ×ª×‘× ×™×ª.\n\n" +
            "5ï¸âƒ£ **×©×œ×‘ 5:** ğŸ« ××•×¡×™×¤×™× ×—×˜×™×£ ×‘×¨ - ×‘×¨×™×, ××¢×¨×‘×‘×™× ×•××©×˜×—×™×.\n\n" +
            "6ï¸âƒ£ **×©×œ×‘ 6:** ××›× ×™×¡×™× ×œ××§×¤×™× â„ï¸ ×œ×›××” ×©×¢×•×ª ×¢×“ ×©×”×—×˜×™×£ ××ª×§×©×”.\n\n" +
            "×”××¢×¨×›×ª ×©×œ ×‘×¨ - ×‘×¨×™× ××›×™×œ×” 100% ×¨×›×™×‘×™× ×˜×‘×¢×™×™×, ×œ×œ× ×’×œ×•×˜×Ÿ ×•××ª××™××™× ×œ×˜×‘×¢×•× ×™×™×.\n\n" +
            "×œ×¨×›×™×©×” ×“×¨×š ×”××ª×¨: ğŸ·ï¸ğŸ’»\n\n" +
            "×‘×©×™×ª×•×£ ×¢× @barbary_il\n",
        videoUrl: "https://www.instagram.com/p/DEDIHjpIuVB/"
    },
    {
        title: "ğŸ½ï¸ ××•×›×œ ×˜×¢×™× ×•×‘×¨×™× ×œ×œ× ×›×™××™×§×œ×™×",
        description: "ğŸ¥˜ **×”×××•× ×” ×©×œ×™ ×‘××•×›×œ ×‘×¨×™×**\n\n" +
            "×× ×™ ××××™×Ÿ ×©×›×“×™ ×œ×”×›×™×Ÿ ××•×›×œ ×˜×¢×™× ×•×‘×¨×™× ×œ× ×¦×¨×™×š ×œ×”×©×ª××© ×‘××ª×›×•× ×™× ×©××›×™×œ×™× ×›×™××™×§×œ×™× ×©×¤×™×ª×—×• ×‘××¢×‘×“×”.\n\n" +
            "×¢×“×™×£ ×œ×”×ª××§×“ ×‘×¨×›×™×‘×™× ××™×›×•×ª×™×™× ×‘××•×›×œ ×©××ª× ××•×›×œ×™× ×•×œ× ×œ× ×¡×•×ª ×œ×—×¡×•×š ×‘×§×œ×•×¨×™×•×ª ×‘×›×œ ×“×¨×š ××¤×©×¨×™×ª.\n\n" +
            "×œ×¢×•×“ ×ª×•×›×Ÿ ×‘× ×•×©× ×ª×–×•× ×” ×ª××©×™×›×• ×œ×¢×§×•×‘ğŸ””",
        videoUrl: "https://www.instagram.com/reel/DBGglQHI3pd/?igsh=NDFjMWFrYjF2bWZh"
    },
];

function Recipes({ closeOverlay }) {
    const navigate = useNavigate();
    const overlayRef = useRef(null);

    useEffect(() => {
        const loadInstagramScript = () => {
            if (!window.instgrm) {
                const script = document.createElement("script");
                script.async = true;
                script.src = "https://www.instagram.com/embed.js";
                document.body.appendChild(script);

                script.onload = () => {
                    // Process Instagram embeds for all recipes
                    window.instgrm.Embeds.process();
                };
            } else {
                window.instgrm.Embeds.process(); // If the script is already loaded, process the embeds immediately
            }
        };

        loadInstagramScript(); // Trigger script loading and processing
    }, []);

    // Close Recipes overlay when clicking outside
    useEffect(() => {
        const handleClickOutside = (event) => {
            if (overlayRef.current && !overlayRef.current.contains(event.target)) {
                if (closeOverlay) {
                    closeOverlay();  // âœ… Close the modal if from navbar
                } else {
                    navigate("/");  // âœ… Navigate home if accessed via /newsletter
                }
            }
        };
        document.addEventListener("mousedown", handleClickOutside);
        return () => {
            document.removeEventListener("mousedown", handleClickOutside);
        };
    }, [navigate]);

    return (
        <div className="recipes-overlay">
            <div ref={overlayRef} className="recipes-content">
                {/* Separate Close Button and Title */}
                <div className="recipes-header">
                    <div className="close-container">
                        <button className="close-btn" onClick={closeOverlay || (() => navigate("/"))}>âœ–</button>
                    </div>
                    <h2 className="recipes-title">××ª×›×•× ×™× ×‘×¨×™××™× ğŸ½ï¸</h2>
                </div>

                <p>×›××Ÿ ×ª×•×›×œ×• ×œ××¦×•× ××ª×›×•× ×™× ×˜×¢×™××™×, ××–×™× ×™× ×•×§×œ×™× ×œ×”×›× ×”!</p>

                <div className="recipes-grid">
                    {recipeList.map((recipe, index) => (
                        <div
                            key={index}
                            className="recipe-card"
                            onClick={() => navigate(`/recipes/${index}`, {state: {recipe}})}
                        >
                            {recipe.title}
                        </div>
                    ))}
                </div>

                <p className="coming-soon">ğŸ“¢ ×‘×§×¨×•×‘ ×™×ª×•×•×¡×¤×• ×¢×•×“ ××ª×›×•× ×™× ×‘×¨×™××™×!</p>
            </div>
        </div>
    );
}

export default Recipes;
